# å‘é‡å’ŒçŸ©é˜µæ±‚å¯¼ä»¥åŠçŸ©é˜µçš„è¿¹ï¼ˆtraceï¼‰

# ğŸ“Œ ä¸€ã€åŸºæœ¬æ¦‚å¿µ

## 1. å˜é‡ç±»å‹ä¸å¯¼æ•°ç±»å‹

| å¯¼æ•°ç±»å‹ | è¾“å…¥ | è¾“å‡º | ç»“æœå½¢å¼ |
|----------|------|------|-----------|
| æ ‡é‡å¯¹æ ‡é‡ | æ ‡é‡ $t$ | æ ‡é‡ $f(t)$ | æ ‡é‡ $\frac{df}{dt}$ |
| å‘é‡å¯¹æ ‡é‡ | æ ‡é‡ $t$ | å‘é‡ $\mathbf{y}(t)$ | å‘é‡ $\frac{d\mathbf{y}}{dt} \in \mathbb{R}^n$ |
| æ ‡é‡å¯¹å‘é‡ | å‘é‡ $\mathbf{x}$ | æ ‡é‡ $f(\mathbf{x})$ | å‘é‡ï¼ˆæ¢¯åº¦ï¼‰$\nabla_{\mathbf{x}} f \in \mathbb{R}^n$ |
| å‘é‡å¯¹å‘é‡ | å‘é‡ $\mathbf{x}$ | å‘é‡ $\mathbf{y}(\mathbf{x})$ | çŸ©é˜µï¼ˆé›…å¯æ¯”ï¼‰$\frac{\partial \mathbf{y}}{\partial \mathbf{x}} \in \mathbb{R}^{m \times n}$ |
| æ ‡é‡å¯¹çŸ©é˜µ | çŸ©é˜µ $\mathbf{X}$ | æ ‡é‡ $f(\mathbf{X})$ | çŸ©é˜µ $\frac{\partial f}{\partial \mathbf{X}} \in \mathbb{R}^{m \times n}$ |
| çŸ©é˜µå¯¹çŸ©é˜µ | çŸ©é˜µ $\mathbf{X}$ | çŸ©é˜µ $\mathbf{Y}(\mathbf{X})$ | å››ç»´å¼ é‡ï¼ˆä¸å¸¸ç”¨ï¼‰ |

---

# ğŸ“Œ äºŒã€å‘é‡å¯¹æ ‡é‡çš„å¯¼æ•°

è®¾ï¼š
$$
\mathbf{y}(t) = 
\begin{bmatrix}
y_1(t) \\
y_2(t) \\
\vdots \\
y_n(t)
\end{bmatrix}
\in \mathbb{R}^n
$$
åˆ™ï¼š
$$
\frac{d\mathbf{y}}{dt} = 
\begin{bmatrix}
\frac{dy_1}{dt} \\
\frac{dy_2}{dt} \\
\vdots \\
\frac{dy_n}{dt}
\end{bmatrix}
\in \mathbb{R}^n
$$

### ç¤ºä¾‹ï¼š
$$
\mathbf{y}(t) = 
\begin{bmatrix}
t^2 \\
\sin t \\
e^t
\end{bmatrix}
\Rightarrow
\frac{d\mathbf{y}}{dt} =
\begin{bmatrix}
2t \\
\cos t \\
e^t
\end{bmatrix}
$$

---

# ğŸ“Œ ä¸‰ã€æ ‡é‡å¯¹å‘é‡çš„å¯¼æ•°ï¼ˆæ¢¯åº¦ï¼‰

è®¾ $f: \mathbb{R}^n \rightarrow \mathbb{R}$ï¼Œå®šä¹‰ä¸ºï¼š
$$
\nabla_{\mathbf{x}} f = \frac{\partial f}{\partial \mathbf{x}} = 
\begin{bmatrix}
\frac{\partial f}{\partial x_1} \\
\frac{\partial f}{\partial x_2} \\
\vdots \\
\frac{\partial f}{\partial x_n}
\end{bmatrix}
\in \mathbb{R}^n
$$

### ç¤ºä¾‹ï¼š
$$
f(\mathbf{x}) = \mathbf{a}^\top \mathbf{x},\quad \frac{\partial f}{\partial \mathbf{x}} = \mathbf{a}
$$

---

# ğŸ“Œ å››ã€å‘é‡å¯¹å‘é‡çš„å¯¼æ•°ï¼ˆé›…å¯æ¯”çŸ©é˜µï¼‰

è®¾ $\mathbf{y} = f(\mathbf{x})$, å…¶ä¸­ï¼š
- $\mathbf{x} \in \mathbb{R}^n$
- $\mathbf{y} \in \mathbb{R}^m$

å®šä¹‰ï¼š
$$
\frac{\partial \mathbf{y}}{\partial \mathbf{x}} = 
\begin{bmatrix}
\frac{\partial y_1}{\partial x_1} & \cdots & \frac{\partial y_1}{\partial x_n} \\
\vdots & \ddots & \vdots \\
\frac{\partial y_m}{\partial x_1} & \cdots & \frac{\partial y_m}{\partial x_n}
\end{bmatrix}
\in \mathbb{R}^{m \times n}
$$

---

# ğŸ“Œ äº”ã€æ ‡é‡å¯¹çŸ©é˜µçš„å¯¼æ•°

è®¾ $f: \mathbb{R}^{m \times n} \rightarrow \mathbb{R}$ï¼Œå®šä¹‰ä¸ºï¼š
$$
\frac{\partial f}{\partial \mathbf{X}} = 
\begin{bmatrix}
\frac{\partial f}{\partial x_{11}} & \cdots & \frac{\partial f}{\partial x_{1n}} \\
\vdots & \ddots & \vdots \\
\frac{\partial f}{\partial x_{m1}} & \cdots & \frac{\partial f}{\partial x_{mn}}
\end{bmatrix}
\in \mathbb{R}^{m \times n}
$$

---

# ğŸ“Œ å…­ã€çŸ©é˜µçš„è¿¹ï¼ˆTraceï¼‰åŠå…¶æ€§è´¨

### å®šä¹‰ï¼š

å¯¹äºæ–¹é˜µ $\mathbf{A} \in \mathbb{R}^{n \times n}$ï¼š
$$
\text{tr}(\mathbf{A}) = \sum_{i=1}^n a_{ii}
$$

### å¸¸ç”¨æ€§è´¨ï¼š

| æ€§è´¨ | è¡¨è¾¾å¼ |
|------|--------|
| çº¿æ€§æ€§ | $\text{tr}(a\mathbf{A} + b\mathbf{B}) = a\,\text{tr}(\mathbf{A}) + b\,\text{tr}(\mathbf{B})$ |
| è½¬ç½®ä¸å˜æ€§ | $\text{tr}(\mathbf{A}^\top) = \text{tr}(\mathbf{A})$ |
| å¾ªç¯ç½®æ¢æ€§ | $\text{tr}(\mathbf{A}\mathbf{B}\mathbf{C}) = \text{tr}(\mathbf{C}\mathbf{A}\mathbf{B}) = \text{tr}(\mathbf{B}\mathbf{C}\mathbf{A})$ |
| å†…ç§¯è¡¨ç¤º | $\text{tr}(\mathbf{A}^\top \mathbf{B}) = \sum_{i,j} A_{ij} B_{ij} = \langle \mathbf{A}, \mathbf{B} \rangle$ |

---

# ğŸ“Œ ä¸ƒã€å¸¸è§çš„å‘é‡/çŸ©é˜µæ±‚å¯¼å…¬å¼ï¼ˆä½¿ç”¨åˆ†æ¯å¸ƒå±€ï¼‰

ä»¥ä¸‹å…¬å¼é€‚ç”¨äº **æ ‡é‡å‡½æ•°å¯¹å‘é‡æˆ–çŸ©é˜µæ±‚å¯¼**ï¼Œæ˜¯æœºå™¨å­¦ä¹ ä¸­æœ€å¸¸ç”¨çš„å…¬å¼ã€‚

---

## ğŸ”¹ å‘é‡ç›¸å…³å…¬å¼

| å‡½æ•° | å¯¼æ•° |
|------|------|
| $f = \mathbf{a}^\top \mathbf{x}$ | $\frac{\partial f}{\partial \mathbf{x}} = \mathbf{a}$ |
| $f = \mathbf{x}^\top \mathbf{A} \mathbf{x}$ | $\frac{\partial f}{\partial \mathbf{x}} = (\mathbf{A} + \mathbf{A}^\top)\mathbf{x}$ |
| $f = \mathbf{x}^\top \mathbf{x}$ | $\frac{\partial f}{\partial \mathbf{x}} = 2\mathbf{x}$ |
| $\mathbf{y} = \mathbf{A}\mathbf{x}$ | $\frac{\partial \mathbf{y}}{\partial \mathbf{x}} = \mathbf{A}^\top$ |
| $\mathbf{y} = \mathbf{x}^\top \mathbf{A}$ | $\frac{\partial \mathbf{y}}{\partial \mathbf{x}} = \mathbf{A}$ |

---

## ğŸ”¹ çŸ©é˜µç›¸å…³å…¬å¼ï¼ˆæ ‡é‡å¯¹çŸ©é˜µå¯¼æ•°ï¼‰

| å‡½æ•° | å¯¼æ•° |
|------|------|
| $f = \text{tr}(\mathbf{A}\mathbf{X})$ | $\frac{\partial f}{\partial \mathbf{X}} = \mathbf{A}^\top$ |
| $f = \text{tr}(\mathbf{X}^\top \mathbf{A} \mathbf{X})$ | $\frac{\partial f}{\partial \mathbf{X}} = \mathbf{A}^\top \mathbf{X} + \mathbf{A} \mathbf{X}$ |
| $f = \text{tr}(\mathbf{X} \mathbf{A})$ | $\frac{\partial f}{\partial \mathbf{X}} = \mathbf{A}^\top$ |
| $f = \ln|\det(\mathbf{X})|$ | $\frac{\partial f}{\partial \mathbf{X}} = (\mathbf{X}^{-1})^\top$ |
| $f = \text{tr}(\mathbf{A} \mathbf{X} \mathbf{B})$ | $\frac{\partial f}{\partial \mathbf{X}} = \mathbf{A}^\top \mathbf{B}^\top$ |
| $f = \text{tr}(\mathbf{A} \mathbf{X}^\top \mathbf{B})$ | $\frac{\partial f}{\partial \mathbf{X}} = \mathbf{B} \mathbf{A}$ |

---

## ğŸ”¹ å‘é‡åŒ–æ“ä½œï¼ˆvecç®—å­ï¼‰ä¸çŸ©é˜µå¯¼æ•°å…³ç³»

è‹¥ $\mathbf{Y} = f(\mathbf{X})$ï¼Œå…¶ä¸­ $\mathbf{X}, \mathbf{Y} \in \mathbb{R}^{m \times n}$ï¼Œåˆ™æœ‰ï¼š
$$
\frac{\partial \text{vec}(\mathbf{Y})}{\partial \text{vec}(\mathbf{X})}
\in \mathbb{R}^{mn \times mn}
$$

è¿™æ˜¯å°†çŸ©é˜µæ˜ å°„è½¬åŒ–ä¸ºå‘é‡æ˜ å°„çš„ä¸€ç§æ–¹å¼ã€‚

---

# ğŸ“Œ å…«ã€çº¿æ€§ä»£æ•°ä¸­çš„å¯¼æ•°æŠ€å·§ç¤ºä¾‹

### ç¤ºä¾‹ï¼šæœ€å°äºŒä¹˜æ³•ä¸­çš„æ¢¯åº¦æ¨å¯¼

ç›®æ ‡å‡½æ•°ï¼š
$$
L = \|\mathbf{y} - \mathbf{X}\boldsymbol{\beta}\|^2 = (\mathbf{y} - \mathbf{X}\boldsymbol{\beta})^\top (\mathbf{y} - \mathbf{X}\boldsymbol{\beta})
$$

å±•å¼€å¹¶æ±‚å¯¼ï¼š
$$
\frac{\partial L}{\partial \boldsymbol{\beta}} = -2\mathbf{X}^\top (\mathbf{y} - \mathbf{X}\boldsymbol{\beta})
$$

ä»¤å¯¼æ•°ä¸º0ï¼Œå¾—æ­£è§„æ–¹ç¨‹ï¼š
$$
\mathbf{X}^\top \mathbf{X} \boldsymbol{\beta} = \mathbf{X}^\top \mathbf{y}
\Rightarrow \boldsymbol{\beta} = (\mathbf{X}^\top \mathbf{X})^{-1} \mathbf{X}^\top \mathbf{y}
$$